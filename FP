#include <stdio.h>   // Library untuk input-output (printf, scanf)
#include <math.h>    // Library matematika (pow untuk pangkat)

/* ================================
   FUNGSI JEDA
   ================================ */
// Fungsi ini dipakai supaya program berhenti sebentar
// Jadi user bisa baca hasil sebelum balik ke menu
void tekanEnter() {
    printf("\nTekan Enter untuk kembali ke menu...");
    getchar();   // membersihkan sisa input
    getchar();   // nunggu user tekan Enter
}

/* ================================
   1. HUKUM OHM
   ================================ */
// Fungsi untuk menghitung V, I, atau R
void hukumOhm() {
    char pilih;        // variabel untuk menyimpan pilihan V/I/R
    float V, I, R;     // variabel tegangan, arus, hambatan

    printf("\n--- Kalkulator Hukum Ohm ---\n");
    printf("Hitung apa? (V/I/R): ");
    scanf(" %c", &pilih);   // user milih mau hitung apa

    // Kalau user pilih hitung Tegangan
    if (pilih == 'V' || pilih == 'v') {
        printf("Masukkan Arus (Ampere): ");
        scanf("%f", &I);   // input arus
        printf("Masukkan Hambatan (Ohm): ");
        scanf("%f", &R);   // input hambatan

        V = I * R;   // rumus Hukum Ohm
        printf("Tegangan = %.2f Volt\n", V);
    }

    // Kalau user pilih hitung Arus
    else if (pilih == 'I' || pilih == 'i') {
        printf("Masukkan Tegangan (Volt): ");
        scanf("%f", &V);
        printf("Masukkan Hambatan (Ohm): ");
        scanf("%f", &R);

        I = V / R;   // rumus Hukum Ohm
        printf("Arus = %.2f Ampere\n", I);
    }

    // Kalau user pilih hitung Hambatan
    else if (pilih == 'R' || pilih == 'r') {
        printf("Masukkan Tegangan (Volt): ");
        scanf("%f", &V);
        printf("Masukkan Arus (Ampere): ");
        scanf("%f", &I);

        R = V / I;   // rumus Hukum Ohm
        printf("Hambatan = %.2f Ohm\n", R);
    }

    tekanEnter();   // balik ke menu
}

/* ================================
   2. DAYA LISTRIK
   ================================ */
// Fungsi untuk menghitung daya listrik
void daya() {
    float V, I, P;   // variabel tegangan, arus, daya

    printf("\n--- Kalkulator Daya ---\n");
    printf("Masukkan Tegangan (Volt): ");
    scanf("%f", &V);
    printf("Masukkan Arus (Ampere): ");
    scanf("%f", &I);

    P = V * I;   // rumus daya listrik
    printf("Daya = %.2f Watt\n", P);

    tekanEnter();
}

/* ================================
   3. RESISTOR SERI
   ================================ */
// Fungsi untuk menghitung resistor seri
void resistorSeri() {
    int n, i;            // n = jumlah resistor
    float R, total = 0; // total untuk menjumlahkan resistor

    printf("\n--- Resistor Seri ---\n");
    printf("Masukkan jumlah resistor: ");
    scanf("%d", &n);

    // Loop untuk input dan menjumlahkan resistor
    for (i = 1; i <= n; i++) {
        printf("Masukkan resistor %d (Ohm): ", i);
        scanf("%f", &R);
        total = total + R;   // ditambah satu per satu
    }

    printf("Total Hambatan Seri = %.2f Ohm\n", total);
    tekanEnter();
}

/* ================================
   4. RESISTOR PARALEL
   ================================ */
// Fungsi untuk menghitung resistor paralel
void resistorParalel() {
    int n, i;
    float R, total = 0;

    printf("\n--- Resistor Paralel ---\n");
    printf("Masukkan jumlah resistor: ");
    scanf("%d", &n);

    // Menjumlahkan 1/R
    for (i = 1; i <= n; i++) {
        printf("Masukkan resistor %d (Ohm): ", i);
        scanf("%f", &R);
        total = total + (1 / R);
    }

    printf("Total Hambatan Paralel = %.2f Ohm\n", 1 / total);
    tekanEnter();
}

/* ================================
   5. DESIMAL → BINER / OKTAL / HEKSA
   ================================ */
// Fungsi konversi dari desimal
void desimalKonversi() {
    int desimal;   // variabel angka desimal

    printf("\n--- Konversi Desimal ---\n");
    printf("Masukkan bilangan desimal: ");
    scanf("%d", &desimal);

    // %b = biner (compiler tertentu)
    // %o = oktal
    // %X = heksadesimal
    printf("Biner        : %b\n", desimal);
    printf("Oktal        : %o\n", desimal);
    printf("Heksadesimal : %X\n", desimal);

    tekanEnter();
}

/* ================================
   6. BINER → DESIMAL
   ================================ */
// Fungsi mengubah biner ke desimal
void binerKeDesimal() {
    int biner, desimal = 0, i = 0, digit;

    printf("\n--- Biner ke Desimal ---\n");
    printf("Masukkan bilangan biner: ");
    scanf("%d", &biner);

    // Loop untuk memecah angka biner
    while (biner != 0) {
        digit = biner % 10;                 // ambil digit terakhir
        desimal = desimal + digit * pow(2, i); // kalikan dengan 2 pangkat i
        biner = biner / 10;                 // buang digit terakhir
        i++;                                // naikkan pangkat
    }

    printf("Hasil Desimal = %d\n", desimal);
    tekanEnter();
}

/* ================================
   7. OKTAL → DESIMAL
   ================================ */
// Fungsi mengubah oktal ke desimal
void oktalKeDesimal() {
    int oktal, desimal = 0, i = 0, digit;

    printf("\n--- Oktal ke Desimal ---\n");
    printf("Masukkan bilangan oktal: ");
    scanf("%d", &oktal);

    // Loop konversi oktal
    while (oktal != 0) {
        digit = oktal % 10;
        desimal = desimal + digit * pow(8, i);
        oktal = oktal / 10;
        i++;
    }

    printf("Hasil Desimal = %d\n", desimal);
    tekanEnter();
}

/* ================================
   8. HEKSA → DESIMAL
   ================================ */
// Fungsi mengubah heksadesimal ke desimal
void heksaKeDesimal() {
    char heksa[20];    // array untuk input heksa
    int desimal = 0, i, nilai;

    printf("\n--- Heksadesimal ke Desimal ---\n");
    printf("Masukkan bilangan heksadesimal: ");
    scanf("%s", heksa);

    // Loop membaca setiap karakter
    for (i = 0; heksa[i] != '\0'; i++) {

        // Jika angka 0–9
        if (heksa[i] >= '0' && heksa[i] <= '9')
            nilai = heksa[i] - '0';
        else
            nilai = heksa[i] - 'A' + 10;   // A=10, B=11, dst

        desimal = desimal * 16 + nilai;
    }

    printf("Hasil Desimal = %d\n", desimal);
    tekanEnter();
}

/* ================================
   MAIN PROGRAM
   ================================ */
// Program utama, SEMUA DIMULAI DARI SINI
int main() {
    int menu;   // variabel pilihan menu

    do {
        // Tampilan menu utama
        printf("\n===============================\n");
        printf(" SILAHKAN DIPILIH YA GANTENG\n");
        printf("===============================\n");
        printf("1. Hukum Ohm\n");
        printf("2. Daya Listrik\n");
        printf("3. Resistor Seri\n");
        printf("4. Resistor Paralel\n");
        printf("5. Desimal -> Biner / Oktal / Heksa\n");
        printf("6. Biner -> Desimal\n");
        printf("7. Oktal -> Desimal\n");
        printf("8. Heksadesimal -> Desimal\n");
        printf("9. Keluar\n");
        printf("Pilih menu: ");
        scanf("%d", &menu);

        // Menjalankan menu sesuai pilihan user
        switch (menu) {
            case 1: hukumOhm(); break;
            case 2: daya(); break;
            case 3: resistorSeri(); break;
            case 4: resistorParalel(); break;
            case 5: desimalKonversi(); break;
            case 6: binerKeDesimal(); break;
            case 7: oktalKeDesimal(); break;
            case 8: heksaKeDesimal(); break;
            case 9: printf("Terima kasih!\n"); break;
            default: printf("Menu tidak valid!\n");
        }

    } while (menu != 9);   // selama belum pilih keluar

    return 0;   // program selesai
}
